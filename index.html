<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>六十甲子</title>
  </head>
  <body>
    <h1 id="title">調べたい年を記載してくださいませ</h1>

    <main>
      <input type="text" id="year" />
      <button id="search">検索！</button>

      <p id="display"></p>
    </main>

    <br />

    <footer>
      <a class="lang">Language : </a>
      <select id="langsel">
        <option value="jp">日本語</option>
        <option value="ko">한국어</option>
      </select>
    </footer>

    <script>
      const input = document.getElementById('year');
      const text = document.getElementById('display');
      const searchBtn = document.getElementById('search');
      const langSel = document.getElementById('langsel');
      const currentYear = new Date().getFullYear();

      // 언어별 리소스
      const langResource = {
        jp: {
          title: '調べたい年を記載してくださいませ',
          searchText: '検索！',
          thisYear: (c, d) => `今年は(${currentYear}年)、<b>${c}${d}</b>年だ。`,
          result: (y, a, b) => `${y}年は、<b>${a}${b}</b>年だ。`,
          gapuel: [
            'きのえ',
            'きのと',
            'ひのえ',
            'ひのと',
            'つちのえ',
            'つちのと',
            'かのえ',
            'かのと',
            'みずのえ',
            'みずのと',
          ],
          jachuk: [
            'ね',
            'うし',
            'とら',
            'う',
            'たつ',
            'み',
            'うま',
            'ひつじ',
            'さる',
            'とり',
            'いぬ',
            'い',
          ],
        },
        ko: {
          title: '알고싶은 년도를 기재해주시오',
          searchText: '검색!',
          thisYear: (c, d) =>
            `올해는 (${currentYear}년), <b>${c}${d}</b>년이다.`,
          result: (y, a, b) => `${y}년은 <b>${a}${b}</b>년이다.`,
          gapuel: ['갑', '을', '병', '정', '무', '기', '경', '신', '임', '계'],
          jachuk: [
            '자',
            '축',
            '인',
            '묘',
            '진',
            '사',
            '오',
            '미',
            '신',
            '유',
            '술',
            '해',
          ],
        },
      };

      // 현재 언어 상태
      let currentLang = 'jp';

      // 육십갑자 계산 함수
      function getGanji(year, lang) {
        const data = langResource[lang];
        const a = data.gapuel[(year - 4 + 60) % 10];
        const b = data.jachuk[(year - 4 + 60) % 12];
        return [a, b];
      }

      // 표시 업데이트 함수
      function updateDisplay() {
        const [c, d] = getGanji(currentYear, currentLang);
        text.innerHTML = langResource[currentLang].thisYear(c, d);
      }

      // 검색 버튼 클릭 시
      searchBtn.addEventListener('click', function () {
        const year = parseInt(input.value);
        if (!year) return;
        const [a, b] = getGanji(year, currentLang);
        text.innerHTML = langResource[currentLang].result(year, a, b);
      });

      // 언어 변경 시
      langSel.addEventListener('change', function () {
        currentLang = this.value;

        // 제목과 버튼 텍스트 갱신
        document.getElementById('title').textContent =
          langResource[currentLang].title;
        searchBtn.textContent = langResource[currentLang].searchText;

        // 초기 표시 업데이트
        updateDisplay();
      });

      // 페이지 로드 시 초기화
      window.addEventListener('load', function () {
        langSel.value = 'jp';
        updateDisplay();
      });
    </script>
  </body>
</html>
